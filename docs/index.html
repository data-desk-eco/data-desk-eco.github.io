<!doctype html>
<notebook theme="midnight">
  <title>Data Desk research</title>
  <script id="header" type="text/markdown">
    # Research

    This is a central index of all Data Desk research notebooks hosted on GitHub.
  </script>

  <script id="hero" type="text/html">
    <figure class="hero">
      <img src="assets/hero.jpg" />
    </figure>
  </script>

  <script id="projects" output="projects" type="application/sql" database="../data/data.duckdb" hidden>
    SELECT
      name,
      description,
      url,
      repo_url,
      created_at
    FROM projects
    ORDER BY created_at DESC
  </script>

  <script id="main" type="module">
    display(html`<ul style="list-style: none; padding-left: 0;">
      ${projects.map(p => {
        const date = new Date(p.created_at).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
        return html`<li style="margin: 1rem 0;">
          <div><a href="${p.url}" target="_blank">${p.name}</a> (<a href="${p.repo_url}" target="_blank">repo</a>)</div>
          ${p.description ? html`<div style="color: #888; font-size: 0.9em;">${p.description}</div>` : ''}
          <div style="color: #888; font-size: 0.9em;">${date}</div>
        </li>`;
      })}
    </ul>`);
  </script>
</notebook>
